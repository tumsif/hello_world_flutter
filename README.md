# hello_world

A new Flutter project.

## Getting Started

This project is a starting point for a Flutter application.

A few resources to get you started if this is your first Flutter project:

- [Lab: Write your first Flutter app](https://docs.flutter.dev/get-started/codelab)
- [Cookbook: Useful Flutter samples](https://docs.flutter.dev/cookbook)

For help getting started with Flutter development, view the
[online documentation](https://docs.flutter.dev/), which offers tutorials,
samples, guidance on mobile development, and a full API reference.

## Important concept here
In this project an important concept used in managing state is by using provider package.

It helps in defining the app state of the application

With `provider` we need to understand 3 concepts:
- ChangeNotifier
- ChangeNotifierProvider
- Consumer

1. `ChangeNotifier` is a simple class included in flutter sdk which provides notifications to its listeners
If something is a ChangeNotifier, you can subscribe to the changes of it. In angular we call it an observable

We can extend this class to store models of data that we are using in our app, control its state, listen for changes etc.

For example
```dart
class CartModel extends ChangeNotifier {
  /// Internal, private state of the cart.
  final List<Item> _items = [];

  /// An unmodifiable view of the items in the cart.
  UnmodifiableListView<Item> get items => UnmodifiableListView(_items);

  /// The current total price of all items (assuming all items cost $42).
  int get totalPrice => _items.length * 42;

  /// Adds [item] to cart. This and [removeAll] are the only ways to modify the
  /// cart from the outside.
  void add(Item item) {
    _items.add(item);
    // This call tells the widgets that are listening to this model to rebuild.
    notifyListeners();
  }

  /// Removes all items from the cart.
  void removeAll() {
    _items.clear();
    // This call tells the widgets that are listening to this model to rebuild.
    notifyListeners();
  }
}
```

The only code specific to ChangeNotifier is the call to `notifyListeners()`. Call this method any time the model changes in a way that might change the app UI

2. `ChangeNotifierProvider` is the widget that provides an instance of a `ChangeNotifier` to its descendants. This comes from `provider` package.
We put the `ChangeNotifierProvider` above all widgets that need it. Example consider a `CartModel` we need to place it above `MyCart` and `MyCatalog` widgets.

NOTE: We don't place the `ChangeNotifierProvider` higher than necessary (because we don't want to pollute the scope)

Example:
```dart
void main() {
  runApp(
    ChangeNotifierProvider(
      create: (context) => CartModel(),
      child: const MyApp(),
    ),
  );
}
```

3. `Consumer`
We can use the `Consumer` widget to consume the values generated by `ChangeNotifierProvider`

Example:
```dart
return Consumer<CartModel>(
  builder: (context, cart, child) {
    return Text('Total price: ${cart.totalPrice}');
  },
);
```
We must specify the type of the model that we want to access. In this case, we want `CartModel`, so we write `Consumer<CartModel>`. If you don't specify the generic (<CartModel>), 
the provider package won't be able to help. provider is based on types, and without the type, it doesn't know what you want.

Consumer requires a builder argument. the builder is a function that is called whenever `ChangeNotifier` changes.

The arguments are:
1. `context`: which we get on every builder method.
2. second argument is the instance of `ChangeNotifier`, we can use the data of the model to define what the UI should look like.
3. the third argument is the child, which is there to hold for child elements.

**NOTE:** It is best practise to put the `Consumer` widgets as deep in the tree as possible. If you don't want to rebuild large parts of the UI.